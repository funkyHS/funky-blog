---
title: 【2.变量】
---

[[TOC]]



## 1. 变量声明
- Go语言是静态类型语言，因此变量（variable）是有明确类型的，编译器也会检查变量类型的正确性。
- 标准格式：`var 变量名 变量类型`
```go
// 声明了一个名为age的变量，类型为int
var age int
```
- 变量的命名规则遵循驼峰命名法，即首个单词小写，每个新单词的首字母大写



## 2. 基本类型

- 计算机中数据存储的最小单位为bit（位），0或者1
- byte：计算机中数据的基本单元，1字节=8bit，数据在计算机中存储或者计算，至少为1个字节
- bool
- string
- int（随系统，一般是占用4个字节）、int8(占一个字节)、int16(占两个字节)、int32(占4个字节)、int64（占8个字节）（有符号和无符号的区别：int8 范围 -128-127，uint8 范围：0-255）
- uint（无符号整数）、uint8、uint16、uint32、uint64、uintptr
- byte：`uint8 的别名`
- rune：`int32 的别名 代表一个 Unicode 码`
- float32、float64
- complex64、complex128


- 当一个变量被声明之后，系统自动赋予它该类型的零值：`int 为 0`，`float 为 0.0`，`bool 为 false`，`string 为空字符串`，`指针为 nil `

- 所有的内存在 Go 中都是经过初始化的


## 3. 不指明变量类型
```go
import "fmt"

// 此种声明变量的方式，并没有指明类型，go语言中，在编译时会自动推导类型
var intValue = 1
var floatValue = 1.0

func main() {
	// 输出int
	fmt.Printf("----intValue: %T----\n", intValue)
	// 输出 float64
	fmt.Printf("----floatValue: %T----", floatValue)
}
```

## 4. 批量格式
```go
package main
import "fmt"

var (
	a int
	b float32
	c string
)
func main() {
	// %d 整数占位符，%f 浮点数占位符(默认精度为6)，%s 字符串占位符
	// 打印结果：a=0,b=0.000000,c=
	fmt.Printf("---- a=%d,b=%f,c=%s ----\n", a, b, c)
}
```


## 5. 简短格式
- 使用简短格式有以下限制：
	- 定义变量，同时显式初始化
	- 不能提供数据类型
	- 只能用在函数内部
```go
package main
import (
	"fmt"
	"net"
)

func main() {
	// 简短格式
	// 打印结果：i=1 , 类型：int
	i := 1
	fmt.Printf("---- i=%d , 类型：%T----\n", i, i)


	// 在多个短变量声明和赋值中，至少有一个新声明的变量出现在左值中，即便其他变量名可能是重复声明的，编译器也不会报错
	//var conn net.Conn
	//var err error
	conn, err := net.Dial("tcp", "127.0.0.1:8000")
	conn1, err := net.Dial("tcp", "127.0.0.1:8000")
	fmt.Println(conn)
	fmt.Println(conn1)
	fmt.Println(err)
}
```


## 6. 变量交换
- 变量交换，比如a=100，b=200，交换之后 a=200，b=100
```go
func main() {
	// 第一种写法
	a := 100
	b := 200
	var c int
	c = b
	b = a
	a = c
	fmt.Printf("a=%d,b=%d", a, b)

	// 第二种写法
	a := 100
	b := 200

	a = a ^ b
	b = b ^ a
	a = a ^ b
	fmt.Printf("a=%d,b=%d", a, b)

	// 第三种写法
	a := 100
	b := 200
	b, a = a, b
	fmt.Printf("a=%d,b=%d", a, b)
}
```


## 7. 匿名变量
- 使用`多重赋值`时，如果`不需要在左值中接受变量`，可以使用匿名变量
```go
func main() {
    // conn, err := net.Dial("tcp", "127.0.0.1:8080")
    // 如果不想接收err的值，那么可以使用_表示，这就是匿名变量
    conn, _ := net.Dial("tcp", "127.0.0.1:8080")
	fmt.Println(conn)
}
```
- 匿名变量以“_”下划线表示
- 匿名变量不占用命名空间，也不会分配内存。匿名变量可以重复声明使用


## 8. 作用域
- 一个变量（常量、类型或函数）在程序中都有一定的作用范围，称之为`作用域`。
- 根据变量定义位置的不同，可以分为以下三个类型：函数内定义的变量称为局部变量、函数外定义的变量称为全局变量、函数定义中的变量称为形式参数 

- 局部变量
	- 在函数体内声明的变量称之为`局部变量`，它们的作用域`只在函数体内`，函数的参数和返回值变量都属于局部变量。
	- 局部变量不是一直存在的，它只在定义它的函数被调用后存在，函数调用结束后这个局部变量就会被销毁。

- 全局变量
	- 在函数体外声明的变量称之为`全局变量`，全局变量只需要在`一个源文件中定义，就可以在所有源文件中使用`，当然，不包含这个全局变量的源文件需要使用“import”关键字引入全局变量所在的源文件之后才能使用这个全局变量。
	- 全局变量声明`必须以 var 关键字开头`，如果想要在外部包中使用全局变量的`首字母必须大写`。
	- Go语言程序中全局变量与局部变量名称可以相同，但是函数体内的局部变量会被优先考虑

- 形式参数
	- 在定义函数时函数名后面括号中的变量叫做`形式参数`（简称形参）。形式参数只在函数调用时才会生效，函数调用结束后就会被销毁，在函数未被调用时，函数的形参`并不占用实际的存储单元`，也没有实际值。
	- 形式参数会作为`函数的局部变量来使用`。





## 参考
- [Go基础教程](https://www.bilibili.com/video/BV1SS4y1T7kJ)