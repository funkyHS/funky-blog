<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>【3. 查询语句】 | Funky&#39;s blog</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/funkyblog/logo.jpg">
    <meta name="description" content="Funky的个人技术博客">
    
    <link rel="preload" href="/funkyblog/assets/css/0.styles.c5671824.css" as="style"><link rel="preload" href="/funkyblog/assets/js/app.a24b3efd.js" as="script"><link rel="preload" href="/funkyblog/assets/js/2.3aea1f50.js" as="script"><link rel="preload" href="/funkyblog/assets/js/84.c4c06788.js" as="script"><link rel="prefetch" href="/funkyblog/assets/js/10.fdb72551.js"><link rel="prefetch" href="/funkyblog/assets/js/100.322ef7c3.js"><link rel="prefetch" href="/funkyblog/assets/js/101.7adabe50.js"><link rel="prefetch" href="/funkyblog/assets/js/102.b672d5b4.js"><link rel="prefetch" href="/funkyblog/assets/js/103.cbd5f57f.js"><link rel="prefetch" href="/funkyblog/assets/js/104.98c6bdcb.js"><link rel="prefetch" href="/funkyblog/assets/js/105.51f7efcb.js"><link rel="prefetch" href="/funkyblog/assets/js/106.bcdfddc5.js"><link rel="prefetch" href="/funkyblog/assets/js/107.000a9752.js"><link rel="prefetch" href="/funkyblog/assets/js/108.92133c7f.js"><link rel="prefetch" href="/funkyblog/assets/js/109.249e3002.js"><link rel="prefetch" href="/funkyblog/assets/js/11.8d7a0728.js"><link rel="prefetch" href="/funkyblog/assets/js/110.a116e6e3.js"><link rel="prefetch" href="/funkyblog/assets/js/111.5d78ef12.js"><link rel="prefetch" href="/funkyblog/assets/js/112.2c266219.js"><link rel="prefetch" href="/funkyblog/assets/js/113.480d3824.js"><link rel="prefetch" href="/funkyblog/assets/js/114.fa1b4ab2.js"><link rel="prefetch" href="/funkyblog/assets/js/115.d65cb78a.js"><link rel="prefetch" href="/funkyblog/assets/js/116.33a2e878.js"><link rel="prefetch" href="/funkyblog/assets/js/117.bbd07ef4.js"><link rel="prefetch" href="/funkyblog/assets/js/118.0dedd5d9.js"><link rel="prefetch" href="/funkyblog/assets/js/119.5a13d359.js"><link rel="prefetch" href="/funkyblog/assets/js/12.84a022d2.js"><link rel="prefetch" href="/funkyblog/assets/js/120.6d8406bc.js"><link rel="prefetch" href="/funkyblog/assets/js/121.1535eb29.js"><link rel="prefetch" href="/funkyblog/assets/js/122.25226b03.js"><link rel="prefetch" href="/funkyblog/assets/js/123.00d7c304.js"><link rel="prefetch" href="/funkyblog/assets/js/124.16802c94.js"><link rel="prefetch" href="/funkyblog/assets/js/125.541331b4.js"><link rel="prefetch" href="/funkyblog/assets/js/126.8eec9a18.js"><link rel="prefetch" href="/funkyblog/assets/js/127.d14ed3d3.js"><link rel="prefetch" href="/funkyblog/assets/js/13.fe7b989e.js"><link rel="prefetch" href="/funkyblog/assets/js/14.06c2893e.js"><link rel="prefetch" href="/funkyblog/assets/js/15.7db30254.js"><link rel="prefetch" href="/funkyblog/assets/js/16.f5c8a3a0.js"><link rel="prefetch" href="/funkyblog/assets/js/17.ee25e8b2.js"><link rel="prefetch" href="/funkyblog/assets/js/18.138ba97b.js"><link rel="prefetch" href="/funkyblog/assets/js/19.7b046ac4.js"><link rel="prefetch" href="/funkyblog/assets/js/20.93aa8f6a.js"><link rel="prefetch" href="/funkyblog/assets/js/21.b422e4c4.js"><link rel="prefetch" href="/funkyblog/assets/js/22.4b4fa0d1.js"><link rel="prefetch" href="/funkyblog/assets/js/23.3135691d.js"><link rel="prefetch" href="/funkyblog/assets/js/24.5ed690d9.js"><link rel="prefetch" href="/funkyblog/assets/js/25.599c60f6.js"><link rel="prefetch" href="/funkyblog/assets/js/26.9388b7c2.js"><link rel="prefetch" href="/funkyblog/assets/js/27.a17039b1.js"><link rel="prefetch" href="/funkyblog/assets/js/28.51a65ac9.js"><link rel="prefetch" href="/funkyblog/assets/js/29.ca8f9960.js"><link rel="prefetch" href="/funkyblog/assets/js/3.90f0fac9.js"><link rel="prefetch" href="/funkyblog/assets/js/30.c93ba89f.js"><link rel="prefetch" href="/funkyblog/assets/js/31.1739efda.js"><link rel="prefetch" href="/funkyblog/assets/js/32.3d6133c5.js"><link rel="prefetch" href="/funkyblog/assets/js/33.ea1b693d.js"><link rel="prefetch" href="/funkyblog/assets/js/34.f5f68409.js"><link rel="prefetch" href="/funkyblog/assets/js/35.fe8276f9.js"><link rel="prefetch" href="/funkyblog/assets/js/36.7dfbbc31.js"><link rel="prefetch" href="/funkyblog/assets/js/37.38292e55.js"><link rel="prefetch" href="/funkyblog/assets/js/38.814bd863.js"><link rel="prefetch" href="/funkyblog/assets/js/39.ff4fbd9f.js"><link rel="prefetch" href="/funkyblog/assets/js/4.bf89a90b.js"><link rel="prefetch" href="/funkyblog/assets/js/40.b78c54dc.js"><link rel="prefetch" href="/funkyblog/assets/js/41.f17fe040.js"><link rel="prefetch" href="/funkyblog/assets/js/42.83583d5d.js"><link rel="prefetch" href="/funkyblog/assets/js/43.deed3fdd.js"><link rel="prefetch" href="/funkyblog/assets/js/44.8033ac93.js"><link rel="prefetch" href="/funkyblog/assets/js/45.78c09822.js"><link rel="prefetch" href="/funkyblog/assets/js/46.dc92e91d.js"><link rel="prefetch" href="/funkyblog/assets/js/47.58c20506.js"><link rel="prefetch" href="/funkyblog/assets/js/48.03e8e813.js"><link rel="prefetch" href="/funkyblog/assets/js/49.51f46791.js"><link rel="prefetch" href="/funkyblog/assets/js/5.f6f2e860.js"><link rel="prefetch" href="/funkyblog/assets/js/50.d62f902a.js"><link rel="prefetch" href="/funkyblog/assets/js/51.2f77c15c.js"><link rel="prefetch" href="/funkyblog/assets/js/52.14d3dba9.js"><link rel="prefetch" href="/funkyblog/assets/js/53.9598cf79.js"><link rel="prefetch" href="/funkyblog/assets/js/54.669e4f25.js"><link rel="prefetch" href="/funkyblog/assets/js/55.aeb878b8.js"><link rel="prefetch" href="/funkyblog/assets/js/56.23f25070.js"><link rel="prefetch" href="/funkyblog/assets/js/57.f048233b.js"><link rel="prefetch" href="/funkyblog/assets/js/58.f3967f69.js"><link rel="prefetch" href="/funkyblog/assets/js/59.62f0670e.js"><link rel="prefetch" href="/funkyblog/assets/js/6.6d922041.js"><link rel="prefetch" href="/funkyblog/assets/js/60.016ba18c.js"><link rel="prefetch" href="/funkyblog/assets/js/61.b5d2cff8.js"><link rel="prefetch" href="/funkyblog/assets/js/62.ac5f87fe.js"><link rel="prefetch" href="/funkyblog/assets/js/63.d9a60137.js"><link rel="prefetch" href="/funkyblog/assets/js/64.b591a667.js"><link rel="prefetch" href="/funkyblog/assets/js/65.e768c8e9.js"><link rel="prefetch" href="/funkyblog/assets/js/66.5f46813d.js"><link rel="prefetch" href="/funkyblog/assets/js/67.02b3f46c.js"><link rel="prefetch" href="/funkyblog/assets/js/68.676ba975.js"><link rel="prefetch" href="/funkyblog/assets/js/69.e031cc98.js"><link rel="prefetch" href="/funkyblog/assets/js/7.7a61e41b.js"><link rel="prefetch" href="/funkyblog/assets/js/70.94a805bd.js"><link rel="prefetch" href="/funkyblog/assets/js/71.281fda5b.js"><link rel="prefetch" href="/funkyblog/assets/js/72.290763cf.js"><link rel="prefetch" href="/funkyblog/assets/js/73.21b036b0.js"><link rel="prefetch" href="/funkyblog/assets/js/74.df7e87b8.js"><link rel="prefetch" href="/funkyblog/assets/js/75.a73c1199.js"><link rel="prefetch" href="/funkyblog/assets/js/76.44658040.js"><link rel="prefetch" href="/funkyblog/assets/js/77.bd56a926.js"><link rel="prefetch" href="/funkyblog/assets/js/78.09a51bc3.js"><link rel="prefetch" href="/funkyblog/assets/js/79.cb143284.js"><link rel="prefetch" href="/funkyblog/assets/js/8.708c7e46.js"><link rel="prefetch" href="/funkyblog/assets/js/80.f134bc8b.js"><link rel="prefetch" href="/funkyblog/assets/js/81.12483621.js"><link rel="prefetch" href="/funkyblog/assets/js/82.e41901b3.js"><link rel="prefetch" href="/funkyblog/assets/js/83.5c039041.js"><link rel="prefetch" href="/funkyblog/assets/js/85.bced8698.js"><link rel="prefetch" href="/funkyblog/assets/js/86.5315ed66.js"><link rel="prefetch" href="/funkyblog/assets/js/87.4ea61a5c.js"><link rel="prefetch" href="/funkyblog/assets/js/88.aa62f043.js"><link rel="prefetch" href="/funkyblog/assets/js/89.0eb25b80.js"><link rel="prefetch" href="/funkyblog/assets/js/9.e076e28d.js"><link rel="prefetch" href="/funkyblog/assets/js/90.7f136876.js"><link rel="prefetch" href="/funkyblog/assets/js/91.12c27e63.js"><link rel="prefetch" href="/funkyblog/assets/js/92.e2ffad27.js"><link rel="prefetch" href="/funkyblog/assets/js/93.a08e3a15.js"><link rel="prefetch" href="/funkyblog/assets/js/94.977d3ede.js"><link rel="prefetch" href="/funkyblog/assets/js/95.f8e1328d.js"><link rel="prefetch" href="/funkyblog/assets/js/96.c119e0f7.js"><link rel="prefetch" href="/funkyblog/assets/js/97.e483280d.js"><link rel="prefetch" href="/funkyblog/assets/js/98.0f1eb7a4.js"><link rel="prefetch" href="/funkyblog/assets/js/99.7813329f.js">
    <link rel="stylesheet" href="/funkyblog/assets/css/0.styles.c5671824.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/funkyblog/" class="home-link router-link-active"><img src="/funkyblog/logo.jpg" alt="Funky's blog" class="logo"> <span class="site-name can-hide">Funky's blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/funkyblog/" class="nav-link">
  Guide
</a></div><div class="nav-item"><a href="/funkyblog/flutter/" class="nav-link">
  Flutter
</a></div><div class="nav-item"><a href="/funkyblog/server/" class="nav-link router-link-active">
  Server
</a></div><div class="nav-item"><a href="/funkyblog/web/" class="nav-link">
  Web
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/funkyblog/" class="nav-link">
  Guide
</a></div><div class="nav-item"><a href="/funkyblog/flutter/" class="nav-link">
  Flutter
</a></div><div class="nav-item"><a href="/funkyblog/server/" class="nav-link router-link-active">
  Server
</a></div><div class="nav-item"><a href="/funkyblog/web/" class="nav-link">
  Web
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JDBC</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Maven</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>MyBatis</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Nginx</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Mysql</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/funkyblog/server/mysql/1-mysql-install/" class="sidebar-link">【1. 安装备份与卸载MySql】</a></li><li><a href="/funkyblog/server/mysql/2-mysql-base/" class="sidebar-link">【2. MySQL基础】</a></li><li><a href="/funkyblog/server/mysql/3-mysql-query/" aria-current="page" class="active sidebar-link">【3. 查询语句】</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/funkyblog/server/mysql/3-mysql-query/#_1-查询语句" class="sidebar-link">1. 查询语句</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/funkyblog/server/mysql/3-mysql-query/#_1-1-简单的查询语句-dql" class="sidebar-link">1.1 简单的查询语句（DQL）</a></li><li class="sidebar-sub-header"><a href="/funkyblog/server/mysql/3-mysql-query/#_1-2-条件查询" class="sidebar-link">1.2 条件查询</a></li><li class="sidebar-sub-header"><a href="/funkyblog/server/mysql/3-mysql-query/#_1-3-排序-升序、降序" class="sidebar-link">1.3 排序（升序、降序）</a></li><li class="sidebar-sub-header"><a href="/funkyblog/server/mysql/3-mysql-query/#_1-4-分组函数-多行处理函数" class="sidebar-link">1.4 分组函数（多行处理函数）</a></li><li class="sidebar-sub-header"><a href="/funkyblog/server/mysql/3-mysql-query/#_1-5-单行处理函数" class="sidebar-link">1.5 单行处理函数</a></li><li class="sidebar-sub-header"><a href="/funkyblog/server/mysql/3-mysql-query/#_1-6-group-by-和-having" class="sidebar-link">1.6 group by 和 having</a></li><li class="sidebar-sub-header"><a href="/funkyblog/server/mysql/3-mysql-query/#_1-7-查询结果集的去重" class="sidebar-link">1.7 查询结果集的去重</a></li><li class="sidebar-sub-header"><a href="/funkyblog/server/mysql/3-mysql-query/#_1-8-完整的dql语句的执行次序" class="sidebar-link">1.8 完整的DQL语句的执行次序</a></li></ul></li><li class="sidebar-sub-header"><a href="/funkyblog/server/mysql/3-mysql-query/#_2-连接查询" class="sidebar-link">2. 连接查询</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/funkyblog/server/mysql/3-mysql-query/#_2-1-连接查询-inner-join" class="sidebar-link">2.1 连接查询 inner join</a></li><li class="sidebar-sub-header"><a href="/funkyblog/server/mysql/3-mysql-query/#_2-2-外连接-left-join-right-join" class="sidebar-link">2.2 外连接 left join，right join</a></li><li class="sidebar-sub-header"><a href="/funkyblog/server/mysql/3-mysql-query/#_2-3-三张表连接查询" class="sidebar-link">2.3 三张表连接查询</a></li></ul></li><li class="sidebar-sub-header"><a href="/funkyblog/server/mysql/3-mysql-query/#_3-子查询" class="sidebar-link">3. 子查询</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/funkyblog/server/mysql/3-mysql-query/#_3-1-where子句中使用子查询" class="sidebar-link">3.1 where子句中使用子查询</a></li><li class="sidebar-sub-header"><a href="/funkyblog/server/mysql/3-mysql-query/#_3-2-from后面嵌套子查询" class="sidebar-link">3.2 from后面嵌套子查询</a></li><li class="sidebar-sub-header"><a href="/funkyblog/server/mysql/3-mysql-query/#_3-3-在select后面嵌套子查询" class="sidebar-link">3.3 在select后面嵌套子查询</a></li></ul></li><li class="sidebar-sub-header"><a href="/funkyblog/server/mysql/3-mysql-query/#_4-union-可以将查询结果集相加" class="sidebar-link">4. union (可以将查询结果集相加)</a></li><li class="sidebar-sub-header"><a href="/funkyblog/server/mysql/3-mysql-query/#_5-limit" class="sidebar-link">5. limit</a></li><li class="sidebar-sub-header"><a href="/funkyblog/server/mysql/3-mysql-query/#参考" class="sidebar-link">参考</a></li></ul></li><li><a href="/funkyblog/server/mysql/4-mysql-constraint/" class="sidebar-link">【4. CURD，约束，存储引擎】</a></li><li><a href="/funkyblog/server/mysql/5-mysql-transaction/" class="sidebar-link">【5. 事务，索引】</a></li><li><a href="/funkyblog/server/mysql/6-mysql-user/" class="sidebar-link">【6. 创建用户与授权】</a></li><li><a href="/funkyblog/server/mysql/7-mysql-datatype/" class="sidebar-link">【7. MySQL字段类型】</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>MongoDB</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Spring</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>SpringBoot</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>SpringSecurity</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><p></p><div class="table-of-contents"><ul><li><a href="#_1-查询语句">1. 查询语句</a><ul><li><a href="#_1-1-简单的查询语句-dql">1.1 简单的查询语句（DQL）</a></li><li><a href="#_1-2-条件查询">1.2 条件查询</a></li><li><a href="#_1-3-排序-升序、降序">1.3 排序（升序、降序）</a></li><li><a href="#_1-4-分组函数-多行处理函数">1.4 分组函数（多行处理函数）</a></li><li><a href="#_1-5-单行处理函数">1.5 单行处理函数</a></li><li><a href="#_1-6-group-by-和-having">1.6 group by 和 having</a></li><li><a href="#_1-7-查询结果集的去重">1.7 查询结果集的去重</a></li><li><a href="#_1-8-完整的dql语句的执行次序">1.8 完整的DQL语句的执行次序</a></li></ul></li><li><a href="#_2-连接查询">2. 连接查询</a><ul><li><a href="#_2-1-连接查询-inner-join">2.1 连接查询 inner join</a></li><li><a href="#_2-2-外连接-left-join-right-join">2.2 外连接 left join，right join</a></li><li><a href="#_2-3-三张表连接查询">2.3 三张表连接查询</a></li></ul></li><li><a href="#_3-子查询">3. 子查询</a><ul><li><a href="#_3-1-where子句中使用子查询">3.1 where子句中使用子查询</a></li><li><a href="#_3-2-from后面嵌套子查询">3.2 from后面嵌套子查询</a></li><li><a href="#_3-3-在select后面嵌套子查询">3.3 在select后面嵌套子查询</a></li></ul></li><li><a href="#_4-union-可以将查询结果集相加">4. union (可以将查询结果集相加)</a></li><li><a href="#_5-limit">5. limit</a></li><li><a href="#参考">参考</a></li></ul></div><p></p> <h2 id="_1-查询语句"><a href="#_1-查询语句" class="header-anchor">#</a> 1. 查询语句</h2> <h3 id="_1-1-简单的查询语句-dql"><a href="#_1-1-简单的查询语句-dql" class="header-anchor">#</a> 1.1 简单的查询语句（DQL）</h3> <ul><li>语法格式：select 字段名1,字段名2,字段名3,.... from 表名;</li> <li>提示：任何一条sql语句以“;”结尾。sql语句不区分大小写。</li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment"># 查询员工的年薪:（字段可以参与数学运算。）</span>
<span class="token keyword">select</span> ename<span class="token punctuation">,</span>sal <span class="token operator">*</span> <span class="token number">12</span> <span class="token keyword">from</span> emp<span class="token punctuation">;</span>

<span class="token comment"># 给查询结果的列重命名</span>
<span class="token keyword">select</span> ename<span class="token punctuation">,</span>sal <span class="token operator">*</span> <span class="token number">12</span> <span class="token keyword">as</span> yearsal <span class="token keyword">from</span> emp<span class="token punctuation">;</span>

<span class="token comment"># 别名中有中文</span>
<span class="token comment"># 错误写法: select ename,sal * 12 as 年薪 from emp;</span>
<span class="token keyword">select</span> ename<span class="token punctuation">,</span>sal <span class="token operator">*</span> <span class="token number">12</span> <span class="token keyword">as</span> <span class="token string">'年薪'</span> <span class="token keyword">from</span> emp<span class="token punctuation">;</span>

<span class="token comment"># as关键字可以省略</span>
<span class="token keyword">select</span> empno<span class="token punctuation">,</span>ename<span class="token punctuation">,</span>sal <span class="token operator">*</span> <span class="token number">12</span> yearsal <span class="token keyword">from</span> emp<span class="token punctuation">;</span>

<span class="token comment"># 查询所有字段</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp<span class="token punctuation">;</span> <span class="token comment"># 实际开发中不建议使用*，效率较低。</span>
</code></pre></div><h3 id="_1-2-条件查询"><a href="#_1-2-条件查询" class="header-anchor">#</a> 1.2 条件查询</h3> <ul><li>语法格式：select  字段,字段... from 表名  where 条件;</li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment"># 查询工资等于5000的员工姓名：</span>
<span class="token keyword">select</span> ename <span class="token keyword">from</span> emp <span class="token keyword">where</span> sal <span class="token operator">=</span> <span class="token number">5000</span><span class="token punctuation">;</span>

<span class="token comment"># 查询SMITH的工资：(字符串使用单引号括起来)</span>
<span class="token keyword">select</span> sal <span class="token keyword">from</span> emp <span class="token keyword">where</span> ename <span class="token operator">=</span> <span class="token string">'SMITH'</span><span class="token punctuation">;</span>

<span class="token comment"># 找出工资高于等于3000的员工：</span>
<span class="token keyword">select</span> ename<span class="token punctuation">,</span>sal <span class="token keyword">from</span> emp <span class="token keyword">where</span> sal <span class="token operator">&gt;=</span> <span class="token number">3000</span><span class="token punctuation">;</span>

<span class="token comment"># 找出工资不等于3000的：</span>
<span class="token keyword">select</span> ename<span class="token punctuation">,</span>sal <span class="token keyword">from</span> emp <span class="token keyword">where</span> sal <span class="token operator">&lt;&gt;</span> <span class="token number">3000</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> ename<span class="token punctuation">,</span>sal <span class="token keyword">from</span> emp <span class="token keyword">where</span> sal <span class="token operator">!=</span> <span class="token number">3000</span><span class="token punctuation">;</span>

<span class="token comment"># 找出工资在1100和3000之间的员工，包括1100和3000</span>
<span class="token keyword">select</span> ename<span class="token punctuation">,</span>sal <span class="token keyword">from</span> emp <span class="token keyword">where</span> sal <span class="token operator">&gt;=</span> <span class="token number">1100</span> <span class="token operator">and</span> sal <span class="token operator">&lt;=</span> <span class="token number">3000</span><span class="token punctuation">;</span>
<span class="token comment"># between...and...是闭区间 [1100 ~ 3000]</span>
<span class="token keyword">select</span> ename<span class="token punctuation">,</span>sal <span class="token keyword">from</span> emp <span class="token keyword">where</span> sal <span class="token operator">between</span> <span class="token number">1100</span> <span class="token operator">and</span> <span class="token number">3000</span><span class="token punctuation">;</span> 
<span class="token comment"># 查询不到任何数据</span>
<span class="token keyword">select</span> ename<span class="token punctuation">,</span>sal <span class="token keyword">from</span> emp <span class="token keyword">where</span> sal <span class="token operator">between</span> <span class="token number">3000</span> <span class="token operator">and</span> <span class="token number">1100</span><span class="token punctuation">;</span> 

<span class="token comment"># between and在使用的时候必须左小右大。between and除了可以使用在数字方面之外，还可以使用在字符串方面。</span>
<span class="token keyword">select</span> ename <span class="token keyword">from</span> emp <span class="token keyword">where</span> ename <span class="token operator">between</span> <span class="token string">'A'</span> <span class="token operator">and</span> <span class="token string">'C'</span><span class="token punctuation">;</span>
<span class="token comment"># 用在字符上面是 左闭右开。</span>
<span class="token keyword">select</span> ename <span class="token keyword">from</span> emp <span class="token keyword">where</span> ename <span class="token operator">between</span> <span class="token string">'A'</span> <span class="token operator">and</span> <span class="token string">'D'</span><span class="token punctuation">;</span> 

<span class="token comment"># 找出哪些人津贴为NULL：</span>
<span class="token comment"># 在数据库当中NULL不是一个值，代表什么也没有，为空。不能用等号衡量。必须使用 `is null`或者`is not null`</span>
<span class="token keyword">select</span> ename<span class="token punctuation">,</span>sal<span class="token punctuation">,</span>comm <span class="token keyword">from</span> emp <span class="token keyword">where</span> comm <span class="token operator">is</span> <span class="token boolean">null</span><span class="token punctuation">;</span>

<span class="token comment"># 找出哪些人津贴不为NULL：</span>
<span class="token keyword">select</span> ename<span class="token punctuation">,</span>sal<span class="token punctuation">,</span>comm <span class="token keyword">from</span> emp <span class="token keyword">where</span> comm <span class="token operator">is</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">;</span>

<span class="token comment"># 找出哪些人没有津贴：</span>
<span class="token keyword">select</span> ename<span class="token punctuation">,</span>sal<span class="token punctuation">,</span>comm <span class="token keyword">from</span> emp <span class="token keyword">where</span> comm <span class="token operator">is</span> <span class="token boolean">null</span> <span class="token operator">or</span> comm <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

<span class="token comment"># 找出工作岗位是MANAGER和SALESMAN的员工：</span>
<span class="token keyword">select</span> ename<span class="token punctuation">,</span>job <span class="token keyword">from</span> emp <span class="token keyword">where</span> job <span class="token operator">=</span> <span class="token string">'MANAGER'</span> <span class="token operator">or</span> job <span class="token operator">=</span> <span class="token string">'SALESMAN'</span>

<span class="token comment"># and和or联合起来用：找出薪资大于1000的并且部门编号是20或30部门的员工</span>
<span class="token comment"># 注意：当运算符的优先级不确定的时候加小括号。</span>
<span class="token comment"># 错误写法: select ename,sal,deptno from emp where sal &gt; 1000 and deptno = 20 or deptno = 30; </span>
<span class="token keyword">select</span> ename<span class="token punctuation">,</span>sal<span class="token punctuation">,</span>deptno <span class="token keyword">from</span> emp <span class="token keyword">where</span> sal <span class="token operator">&gt;</span> <span class="token number">1000</span> <span class="token operator">and</span> <span class="token punctuation">(</span>deptno <span class="token operator">=</span> <span class="token number">20</span> <span class="token operator">or</span> deptno <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment"># in等同于or：找出工作岗位是MANAGER和SALESMAN的员工</span>
<span class="token keyword">select</span> ename<span class="token punctuation">,</span>job <span class="token keyword">from</span> emp <span class="token keyword">where</span> job <span class="token operator">=</span> <span class="token string">'SALESMAN'</span> <span class="token operator">or</span> job <span class="token operator">=</span> <span class="token string">'MANAGER'</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> ename<span class="token punctuation">,</span>job <span class="token keyword">from</span> emp <span class="token keyword">where</span> job <span class="token operator">in</span><span class="token punctuation">(</span><span class="token string">'SALESMAN'</span><span class="token punctuation">,</span> <span class="token string">'MANAGER'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> ename<span class="token punctuation">,</span>job <span class="token keyword">from</span> emp <span class="token keyword">where</span> sal <span class="token operator">in</span><span class="token punctuation">(</span><span class="token number">800</span><span class="token punctuation">,</span> <span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment"># in后面的值不是区间，是具体的值。</span>


<span class="token comment"># 模糊查询like：在模糊查询当中，必须掌握两个特殊的符号，一个是 %，一个是 _ </span>
<span class="token comment"># % 代表任意多个字符，_ 代表任意1个字符</span>

<span class="token comment"># 找出名字当中含有O的：</span>
<span class="token keyword">select</span> ename <span class="token keyword">from</span> emp <span class="token keyword">where</span> ename <span class="token operator">like</span> <span class="token string">'%O%'</span><span class="token punctuation">;</span>
<span class="token comment"># 找出名字中第二个字母是A的：</span>
<span class="token keyword">select</span> ename <span class="token keyword">from</span> emp <span class="token keyword">where</span> ename <span class="token operator">like</span> <span class="token string">'_A%'</span><span class="token punctuation">;</span>
<span class="token comment"># 找出名字中有下划线的：</span>
<span class="token keyword">select</span> name <span class="token keyword">from</span> t_user <span class="token keyword">where</span> name <span class="token operator">like</span> <span class="token string">'%\_%'</span><span class="token punctuation">;</span>
<span class="token comment"># 找出名字中最后一个字母是T的：</span>
<span class="token keyword">select</span> ename <span class="token keyword">from</span> emp <span class="token keyword">where</span> ename <span class="token operator">like</span> <span class="token string">'%T'</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_1-3-排序-升序、降序"><a href="#_1-3-排序-升序、降序" class="header-anchor">#</a> 1.3 排序（升序、降序）</h3> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment"># 按照工资升序，找出员工名和薪资。默认是升序。asc表示升序，desc表示降序。</span>
<span class="token keyword">select</span> ename <span class="token punctuation">,</span> sal <span class="token keyword">from</span> emp <span class="token keyword">order</span> <span class="token keyword">by</span> sal<span class="token punctuation">;</span> <span class="token comment"># 升序</span>
<span class="token keyword">select</span> ename <span class="token punctuation">,</span> sal <span class="token keyword">from</span> emp <span class="token keyword">order</span> <span class="token keyword">by</span> sal <span class="token keyword">asc</span><span class="token punctuation">;</span> <span class="token comment"># 升序</span>
<span class="token keyword">select</span> ename <span class="token punctuation">,</span> sal <span class="token keyword">from</span> emp <span class="token keyword">order</span> <span class="token keyword">by</span> sal <span class="token keyword">desc</span><span class="token punctuation">;</span> <span class="token comment"># 降序</span>

<span class="token comment"># 按照工资的降序排列，当工资相同的时候再按照名字的升序排列</span>
<span class="token comment"># 注意：越靠前的字段越能起到主导作用。只有当前面的字段无法完成排序的时候，才会启用后面的字段。</span>
<span class="token keyword">select</span> ename<span class="token punctuation">,</span>sal <span class="token keyword">from</span> emp <span class="token keyword">order</span> <span class="token keyword">by</span> sal <span class="token keyword">desc</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> ename<span class="token punctuation">,</span>sal <span class="token keyword">from</span> emp <span class="token keyword">order</span> <span class="token keyword">by</span> sal <span class="token keyword">desc</span> <span class="token punctuation">,</span> ename <span class="token keyword">asc</span><span class="token punctuation">;</span>

<span class="token comment"># 找出工作岗位是SALESMAN的员工，并且要求按照薪资的降序排列</span>
<span class="token keyword">select</span> ename<span class="token punctuation">,</span>job<span class="token punctuation">,</span>sal <span class="token keyword">from</span> emp <span class="token keyword">where</span> job <span class="token operator">=</span> <span class="token string">'SALESMAN'</span> <span class="token keyword">order</span> <span class="token keyword">by</span> sal <span class="token keyword">desc</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_1-4-分组函数-多行处理函数"><a href="#_1-4-分组函数-多行处理函数" class="header-anchor">#</a> 1.4 分组函数（多行处理函数）</h3> <ul><li>分组函数一共5个。count 计数、sum 求和、avg 平均值、max 最大值、min 最小值</li> <li>记住：所有的分组函数都是对“某一组”数据进行操作的。</li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment"># 找出工资总和/最高工资/最低工资/平均工资：</span>
<span class="token keyword">select</span> <span class="token function">sum</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span> <span class="token keyword">from</span> emp<span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token function">max</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span> <span class="token keyword">from</span> emp<span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token function">min</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span> <span class="token keyword">from</span> emp<span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token function">avg</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span> <span class="token keyword">from</span> emp<span class="token punctuation">;</span>

<span class="token comment"># 找出总人数：</span>
<span class="token comment"># count(*)和count(具体的某个字段) 区别</span>
<span class="token comment"># count(*):不是统计某个字段中数据的个数，而是统计总记录条数。（和某个字段无关）</span>
<span class="token comment"># count(comm): 表示统计comm字段中不为NULL的数据总数量。</span>
<span class="token keyword">select</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">from</span> emp<span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token function">count</span><span class="token punctuation">(</span>ename<span class="token punctuation">)</span> <span class="token keyword">from</span> emp<span class="token punctuation">;</span>

<span class="token comment"># 分组函数自动忽略NULL：</span>
<span class="token keyword">select</span> <span class="token function">count</span><span class="token punctuation">(</span>comm<span class="token punctuation">)</span> <span class="token keyword">from</span> emp<span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token function">sum</span><span class="token punctuation">(</span>comm<span class="token punctuation">)</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> comm <span class="token operator">is</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">;</span> <span class="token comment"># 不需要额外添加这个过滤条件。sum函数自动忽略NULL。</span>

<span class="token comment"># 找出工资高于平均工资的员工</span>
<span class="token keyword">select</span> <span class="token function">avg</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span> <span class="token keyword">from</span> emp<span class="token punctuation">;</span> <span class="token comment"># 平均工资</span>
<span class="token keyword">select</span> ename<span class="token punctuation">,</span>sal <span class="token keyword">from</span> emp <span class="token keyword">where</span> sal <span class="token operator">&gt;</span> <span class="token function">avg</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment"># ERROR 1111 (HY000): Invalid use of group function</span>
<span class="token comment"># 上面错误原因：SQL语句当中有一个语法规则，分组函数不可直接使用在where子句当中。因为 group by是在where执行之后才会执行的。</span>
<span class="token comment"># 第一步：找出平均工资  </span>
<span class="token keyword">select</span> <span class="token function">avg</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span> <span class="token keyword">from</span> emp<span class="token punctuation">;</span>
<span class="token comment"># 第二步：找出高于平均工资的员工  </span>
<span class="token keyword">select</span> ename<span class="token punctuation">,</span>sal <span class="token keyword">from</span> emp <span class="token keyword">where</span> sal <span class="token operator">&gt;</span> <span class="token number">2073.214286</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> ename<span class="token punctuation">,</span>sal <span class="token keyword">from</span> emp <span class="token keyword">where</span> sal <span class="token operator">&gt;</span> <span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token function">avg</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span> <span class="token keyword">from</span> emp<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment"># 分组函数也能组合起来用：</span>
<span class="token keyword">select</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">sum</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">avg</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">max</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">min</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span> <span class="token keyword">from</span> emp<span class="token punctuation">;</span>
</code></pre></div><img src="http://funky_hs.gitee.io/imgcloud/funkyblog/database/mysql/2/7.png" width="500"> <h3 id="_1-5-单行处理函数"><a href="#_1-5-单行处理函数" class="header-anchor">#</a> 1.5 单行处理函数</h3> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment"># 计算每个员工的年薪</span>
<span class="token keyword">select</span> ename<span class="token punctuation">,</span><span class="token punctuation">(</span>sal<span class="token operator">+</span>comm<span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">12</span> <span class="token keyword">as</span> yearsal <span class="token keyword">from</span> emp<span class="token punctuation">;</span>
<span class="token comment"># 重点：【 所有数据库都是这样规定的，只要有NULL参与的运算结果一定是NULL 】</span>
<span class="token comment"># 使用ifnull函数：</span>
<span class="token keyword">select</span> ename<span class="token punctuation">,</span><span class="token punctuation">(</span>sal<span class="token operator">+</span>ifnull<span class="token punctuation">(</span>comm<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">12</span> <span class="token keyword">as</span> yearsal <span class="token keyword">from</span> emp<span class="token punctuation">;</span>

<span class="token comment"># ifnull() 空处理函数：ifnull(可能为NULL的数据,被当做什么处理)，属于单行处理函数。</span>
<span class="token keyword">select</span> ename<span class="token punctuation">,</span>ifnull<span class="token punctuation">(</span>comm<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">as</span> comm <span class="token keyword">from</span> emp<span class="token punctuation">;</span>
</code></pre></div><img src="http://funky_hs.gitee.io/imgcloud/funkyblog/database/mysql/2/8.png" width="500"> <h3 id="_1-6-group-by-和-having"><a href="#_1-6-group-by-和-having" class="header-anchor">#</a> 1.6 group by 和 having</h3> <ul><li><strong>group by</strong> : 按照某个字段或者某些字段进行分组。</li> <li><strong>having</strong> : having是对分组之后的数据进行再次过滤。</li> <li>注意：分组函数一般都会和group by联合使用，这也是为什么它被称为分组函数的原因。</li> <li>并且任何一个分组函数（count sum avg max min）都是在group by语句执行结束之后才会执行的。</li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment"># 找出每个工作岗位的最高薪资：</span>
<span class="token keyword">select</span> <span class="token function">max</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span><span class="token punctuation">,</span>job <span class="token keyword">from</span> emp <span class="token keyword">group</span> <span class="token keyword">by</span> job<span class="token punctuation">;</span>
<span class="token comment"># 语法错误</span>
<span class="token keyword">select</span> ename<span class="token punctuation">,</span><span class="token function">max</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span><span class="token punctuation">,</span>job <span class="token keyword">from</span> emp <span class="token keyword">group</span> <span class="token keyword">by</span> job<span class="token punctuation">;</span>
<span class="token comment"># 记住一个规则：当一条语句中有group by的话，select后面只能跟分组函数和参与分组的字段。</span>

<span class="token comment"># 每个工作岗位的平均薪资: </span>
<span class="token keyword">select</span> job<span class="token punctuation">,</span><span class="token function">avg</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span> <span class="token keyword">from</span> emp <span class="token keyword">group</span> <span class="token keyword">by</span> job<span class="token punctuation">;</span>

<span class="token comment"># 找出每个部门不同工作岗位的最高薪资: </span>
<span class="token keyword">select</span> deptno<span class="token punctuation">,</span>job<span class="token punctuation">,</span><span class="token function">max</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span> <span class="token keyword">from</span> emp <span class="token keyword">group</span> <span class="token keyword">by</span> deptno<span class="token punctuation">,</span>job<span class="token punctuation">;</span>

<span class="token comment"># 找出每个部门的最高薪资，要求显示薪资大于2900的数据。</span>
<span class="token comment"># 第一步：找出每个部门的最高薪资：</span>
<span class="token keyword">select</span> <span class="token function">max</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span><span class="token punctuation">,</span>deptno <span class="token keyword">from</span> emp <span class="token keyword">group</span> <span class="token keyword">by</span> deptno<span class="token punctuation">;</span>
<span class="token comment"># 第二步：找出薪资大于2900： </span>
<span class="token keyword">select</span> <span class="token function">max</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span><span class="token punctuation">,</span>deptno <span class="token keyword">from</span> emp <span class="token keyword">group</span> <span class="token keyword">by</span> deptno <span class="token keyword">having</span> <span class="token function">max</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">2900</span><span class="token punctuation">;</span> <span class="token comment"># 这种方式效率低。</span>
<span class="token keyword">select</span> <span class="token function">max</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span><span class="token punctuation">,</span>deptno <span class="token keyword">from</span> emp <span class="token keyword">where</span> sal <span class="token operator">&gt;</span> <span class="token number">2900</span> <span class="token keyword">group</span> <span class="token keyword">by</span> deptno<span class="token punctuation">;</span>  <span class="token comment"># 效率较高，建议能够使用where过滤的尽量使用where。</span>

<span class="token comment"># 找出每个部门的平均薪资，要求显示薪资大于2000的数据</span>
<span class="token comment"># 第一步：找出每个部门的平均薪资：</span>
<span class="token keyword">select</span> deptno<span class="token punctuation">,</span><span class="token function">avg</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span> <span class="token keyword">from</span> emp <span class="token keyword">group</span> <span class="token keyword">by</span> deptno<span class="token punctuation">;</span>
<span class="token comment"># 第二步：要求显示薪资大于2000的数据：</span>
<span class="token keyword">select</span> deptno<span class="token punctuation">,</span><span class="token function">avg</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span> <span class="token keyword">from</span> emp <span class="token keyword">group</span> <span class="token keyword">by</span> deptno <span class="token keyword">having</span> <span class="token function">avg</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">2000</span><span class="token punctuation">;</span>
<span class="token comment"># where后面不能使用分组函数：</span>
<span class="token keyword">select</span> deptno<span class="token punctuation">,</span><span class="token function">avg</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> <span class="token function">avg</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">2000</span> <span class="token keyword">group</span> <span class="token keyword">by</span> deptno<span class="token punctuation">;</span> <span class="token comment"># 错误了。这种情况只能使用having过滤。</span>
</code></pre></div><h3 id="_1-7-查询结果集的去重"><a href="#_1-7-查询结果集的去重" class="header-anchor">#</a> 1.7 查询结果集的去重</h3> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment"># distinct关键字去除重复记录。</span>
<span class="token comment"># 记住：distinct只能出现在所有字段的最前面。</span>

<span class="token keyword">select</span> <span class="token keyword">distinct</span> job <span class="token keyword">from</span> emp<span class="token punctuation">;</span>
<span class="token comment"># 错误写法：select ename,distinct job from emp;</span>

<span class="token comment"># 联合去重：</span>
<span class="token keyword">select</span> <span class="token keyword">distinct</span> deptno<span class="token punctuation">,</span>job <span class="token keyword">from</span> emp<span class="token punctuation">;</span>
<span class="token comment"># 统计岗位的数量：</span>
<span class="token keyword">select</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token keyword">distinct</span> job<span class="token punctuation">)</span> <span class="token keyword">from</span> emp<span class="token punctuation">;</span>
</code></pre></div><h3 id="_1-8-完整的dql语句的执行次序"><a href="#_1-8-完整的dql语句的执行次序" class="header-anchor">#</a> 1.8 完整的DQL语句的执行次序</h3> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span>        <span class="token number">5</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">from</span>          <span class="token number">1</span>    
    <span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">where</span>         <span class="token number">2</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">group</span> <span class="token keyword">by</span>      <span class="token number">3</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">having</span>        <span class="token number">4</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">order</span> <span class="token keyword">by</span>      <span class="token number">6</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre></div><hr> <h2 id="_2-连接查询"><a href="#_2-连接查询" class="header-anchor">#</a> 2. 连接查询</h2> <h3 id="_2-1-连接查询-inner-join"><a href="#_2-1-连接查询-inner-join" class="header-anchor">#</a> 2.1 连接查询 inner join</h3> <ul><li>在实际开发中，大部分的情况下都不是从单表中查询数据，一般都是多张表联合查询取出最终的结果。</li> <li>在实际开发中，一般一个业务都会对应多张表，比如：学生和班级，起码两张表。</li> <li>表的别名：<code>select e.ename,d.dname from emp e,dept d;</code></li> <li>表的别名好处：第一：执行效率高，第二：可读性好。</li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment"># 查询每个员工的部门名称，要求显示员工名和部门名</span>
<span class="token comment"># SQL92:（太老，不用了）</span>
<span class="token keyword">select</span> e<span class="token punctuation">.</span>ename<span class="token punctuation">,</span>d<span class="token punctuation">.</span>dname <span class="token keyword">from</span> emp e<span class="token punctuation">,</span> dept d <span class="token keyword">where</span> e<span class="token punctuation">.</span>deptno <span class="token operator">=</span> d<span class="token punctuation">.</span>deptno<span class="token punctuation">;</span>
<span class="token comment"># SQL99：（常用的）</span>
<span class="token keyword">select</span> e<span class="token punctuation">.</span>ename<span class="token punctuation">,</span>d<span class="token punctuation">.</span>dname <span class="token keyword">from</span> emp e <span class="token keyword">join</span> dept d <span class="token keyword">on</span> e<span class="token punctuation">.</span>deptno <span class="token operator">=</span> d<span class="token punctuation">.</span>deptno<span class="token punctuation">;</span>
<span class="token comment"># inner可以省略的，带着inner目的是可读性好一些：</span>
<span class="token keyword">select</span> e<span class="token punctuation">.</span>ename<span class="token punctuation">,</span>d<span class="token punctuation">.</span>dname <span class="token keyword">from</span> emp e <span class="token keyword">inner</span> <span class="token keyword">join</span> dept d <span class="token keyword">on</span> e<span class="token punctuation">.</span>deptno <span class="token operator">=</span> d<span class="token punctuation">.</span>deptno<span class="token punctuation">;</span>
<span class="token comment"># SQL99语法结构更清晰一些：表的连接条件和后来的where条件分离了。</span>
 
<span class="token comment"># 找出每个员工的工资等级，要求显示员工名、工资、工资等级</span>
<span class="token keyword">select</span> e<span class="token punctuation">.</span>ename<span class="token punctuation">,</span>e<span class="token punctuation">.</span>sal<span class="token punctuation">,</span>s<span class="token punctuation">.</span>grade <span class="token keyword">from</span> emp e <span class="token keyword">inner</span> <span class="token keyword">join</span> salgrade s <span class="token keyword">on</span> e<span class="token punctuation">.</span>sal <span class="token operator">between</span> s<span class="token punctuation">.</span>losal <span class="token operator">and</span> s<span class="token punctuation">.</span>hisal<span class="token punctuation">;</span> <span class="token comment"># inner可以省略</span>
    
<span class="token comment"># 找出每个员工的上级领导，要求显示员工名和对应的领导名 </span>
<span class="token keyword">select</span> a<span class="token punctuation">.</span>ename <span class="token keyword">as</span> <span class="token string">'员工名'</span><span class="token punctuation">,</span>b<span class="token punctuation">.</span>ename <span class="token keyword">as</span> <span class="token string">'领导名'</span>  <span class="token keyword">from</span>  emp a  <span class="token keyword">inner</span> <span class="token keyword">join</span> emp b <span class="token keyword">on</span> a<span class="token punctuation">.</span>mgr <span class="token operator">=</span> b<span class="token punctuation">.</span>empno<span class="token punctuation">;</span>
</code></pre></div><h3 id="_2-2-外连接-left-join-right-join"><a href="#_2-2-外连接-left-join-right-join" class="header-anchor">#</a> 2.2 外连接 left join，right join</h3> <ul><li><strong>什么是外连接，和内连接有什么区别</strong> <ul><li><strong>内连接</strong>：假设A和B表进行连接，使用内连接的话，凡是A表和B表能够匹配上的记录查询出来，这就是内连接。AB两张表没有主副之分，两张表是平等的。</li> <li><strong>外连接</strong>：假设A和B表进行连接，使用外连接的话，AB两张表中有一张表是主表，一张表是副表，主要查询主表中的数据，捎带着查询副表，当副表中的数据没有和主表中的数据匹配上，副表自动模拟出NULL与之匹配。</li> <li>外连接的分类：左外连接（左连接）：表示左边的这张表是主表。右外连接（右连接）：表示右边的这张表是主表。</li> <li>左连接有右连接的写法，右连接也会有对应的左连接的写法。</li></ul></li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment"># 找出每个员工的上级领导？（所有员工必须全部查询出来。）</span>
<span class="token comment"># 内连接：</span>
<span class="token keyword">select</span> a<span class="token punctuation">.</span>ename <span class="token keyword">as</span> <span class="token string">'员工名'</span><span class="token punctuation">,</span>b<span class="token punctuation">.</span>ename <span class="token keyword">as</span> <span class="token string">'领导名'</span> <span class="token keyword">from</span> emp a <span class="token keyword">inner</span> <span class="token keyword">join</span> emp b <span class="token keyword">on</span> a<span class="token punctuation">.</span>mgr <span class="token operator">=</span> b<span class="token punctuation">.</span>empno<span class="token punctuation">;</span>

<span class="token comment"># 外连接：（左外连接/左连接，表示左边是主表）：</span>
<span class="token keyword">select</span> a<span class="token punctuation">.</span>ename <span class="token string">'员工'</span><span class="token punctuation">,</span> b<span class="token punctuation">.</span>ename <span class="token string">'领导'</span> <span class="token keyword">from</span> emp a <span class="token keyword">left</span> <span class="token keyword">join</span> emp b <span class="token keyword">on</span> a<span class="token punctuation">.</span>mgr <span class="token operator">=</span> b<span class="token punctuation">.</span>empno<span class="token punctuation">;</span>
<span class="token comment"># 外连接：（右外连接/右连接，表示右边是主表）：</span>
<span class="token keyword">select</span> a<span class="token punctuation">.</span>ename <span class="token string">'员工'</span><span class="token punctuation">,</span> b<span class="token punctuation">.</span>ename <span class="token string">'领导'</span> <span class="token keyword">from</span> emp b <span class="token keyword">right</span> <span class="token keyword">join</span> emp a <span class="token keyword">on</span> a<span class="token punctuation">.</span>mgr <span class="token operator">=</span> b<span class="token punctuation">.</span>empno<span class="token punctuation">;</span>

<span class="token comment"># 外连接最重要的特点是：主表的数据无条件的全部查询出来。副表没有与之匹配的，就以NULL匹配</span>
<span class="token comment"># 找出哪个部门没有员工：</span>
<span class="token keyword">select</span> d<span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">from</span> emp e <span class="token keyword">right</span> <span class="token keyword">join</span> dept d <span class="token keyword">on</span> e<span class="token punctuation">.</span>deptno <span class="token operator">=</span> d<span class="token punctuation">.</span>deptno <span class="token keyword">where</span> e<span class="token punctuation">.</span>empno <span class="token operator">is</span> <span class="token boolean">null</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_2-3-三张表连接查询"><a href="#_2-3-三张表连接查询" class="header-anchor">#</a> 2.3 三张表连接查询</h3> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment"># 找出每一个员工的部门名称以及工资等级：</span>
<span class="token keyword">select</span> e<span class="token punctuation">.</span>ename<span class="token punctuation">,</span>d<span class="token punctuation">.</span>dname<span class="token punctuation">,</span>s<span class="token punctuation">.</span>grade 
<span class="token keyword">from</span> emp e <span class="token keyword">join</span> dept d <span class="token keyword">on</span> e<span class="token punctuation">.</span>deptno <span class="token operator">=</span> d<span class="token punctuation">.</span>deptno 
<span class="token keyword">join</span> salgrade s <span class="token keyword">on</span> e<span class="token punctuation">.</span>sal <span class="token operator">between</span> s<span class="token punctuation">.</span>losal <span class="token operator">and</span> s<span class="token punctuation">.</span>hisal<span class="token punctuation">;</span>

<span class="token comment"># 找出每一个员工的部门名称、工资等级、以及上级领导</span>
<span class="token keyword">select</span> 
    e<span class="token punctuation">.</span>ename <span class="token string">'员工'</span><span class="token punctuation">,</span>d<span class="token punctuation">.</span>dname<span class="token punctuation">,</span>s<span class="token punctuation">.</span>grade<span class="token punctuation">,</span>e1<span class="token punctuation">.</span>ename <span class="token string">'领导'</span> 
<span class="token keyword">from</span> 
    emp e 
<span class="token keyword">join</span> 
    dept d 
<span class="token keyword">on</span> 
    e<span class="token punctuation">.</span>deptno <span class="token operator">=</span> d<span class="token punctuation">.</span>deptno 
<span class="token keyword">join</span> 
    salgrade s 
<span class="token keyword">on</span> 
    e<span class="token punctuation">.</span>sal 
<span class="token operator">between</span> 
    s<span class="token punctuation">.</span>losal 
<span class="token operator">and</span> 
    s<span class="token punctuation">.</span>hisal 
<span class="token keyword">left</span> <span class="token keyword">join</span> 
    emp e1 
<span class="token keyword">on</span> 
    e<span class="token punctuation">.</span>mgr <span class="token operator">=</span> e1<span class="token punctuation">.</span>empno<span class="token punctuation">;</span>
</code></pre></div><hr> <h2 id="_3-子查询"><a href="#_3-子查询" class="header-anchor">#</a> 3. 子查询</h2> <ul><li>select语句当中嵌套select语句，被嵌套的select语句是子查询。</li></ul> <h3 id="_3-1-where子句中使用子查询"><a href="#_3-1-where子句中使用子查询" class="header-anchor">#</a> 3.1 where子句中使用子查询</h3> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment"># 找出高于平均薪资的员工信息</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> sal <span class="token operator">&gt;</span> <span class="token function">avg</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment"># 错误的写法，where后面不能直接使用分组函数。</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> sal <span class="token operator">&gt;</span> <span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token function">avg</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span> <span class="token keyword">from</span> emp<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_3-2-from后面嵌套子查询"><a href="#_3-2-from后面嵌套子查询" class="header-anchor">#</a> 3.2 from后面嵌套子查询</h3> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment"># 找出每个部门平均薪水的等级</span>
<span class="token comment"># 第一步：找出每个部门平均薪水（按照部门编号分组，求sal的平均值）：</span>
<span class="token keyword">select</span> deptno<span class="token punctuation">,</span><span class="token function">avg</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span> <span class="token keyword">as</span> avgsal <span class="token keyword">from</span> emp <span class="token keyword">group</span> <span class="token keyword">by</span> deptno<span class="token punctuation">;</span>
<span class="token comment"># 第二步：将以上的查询结果当做临时表t，让t表和salgrade s表连接，条件是：t.avgsal between s.losal and s.hisal</span>
<span class="token keyword">select</span> t<span class="token punctuation">.</span><span class="token operator">*</span><span class="token punctuation">,</span>s<span class="token punctuation">.</span>grade <span class="token keyword">from</span> <span class="token punctuation">(</span><span class="token keyword">select</span> deptno<span class="token punctuation">,</span><span class="token function">avg</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span> <span class="token keyword">as</span> avgsal <span class="token keyword">from</span> emp <span class="token keyword">group</span> <span class="token keyword">by</span> deptno<span class="token punctuation">)</span> t <span class="token keyword">join</span> salgrade s <span class="token keyword">on</span> t<span class="token punctuation">.</span>avgsal <span class="token operator">between</span> s<span class="token punctuation">.</span>losal <span class="token operator">and</span> s<span class="token punctuation">.</span>hisal<span class="token punctuation">;</span>
</code></pre></div><h3 id="_3-3-在select后面嵌套子查询"><a href="#_3-3-在select后面嵌套子查询" class="header-anchor">#</a> 3.3 在select后面嵌套子查询</h3> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment"># 找出每个员工所在的部门名称，要求显示员工名和部门名</span>
<span class="token keyword">select</span> e<span class="token punctuation">.</span>ename<span class="token punctuation">,</span>d<span class="token punctuation">.</span>dname <span class="token keyword">from</span> emp e <span class="token keyword">join</span> dept d <span class="token keyword">on</span> e<span class="token punctuation">.</span>deptno <span class="token operator">=</span> d<span class="token punctuation">.</span>deptno<span class="token punctuation">;</span>
<span class="token keyword">select</span> e<span class="token punctuation">.</span>ename<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token keyword">select</span> d<span class="token punctuation">.</span>dname <span class="token keyword">from</span> dept d <span class="token keyword">where</span> e<span class="token punctuation">.</span>deptno <span class="token operator">=</span> d<span class="token punctuation">.</span>deptno<span class="token punctuation">)</span> <span class="token keyword">as</span> dname <span class="token keyword">from</span> emp e<span class="token punctuation">;</span>
</code></pre></div><hr> <h2 id="_4-union-可以将查询结果集相加"><a href="#_4-union-可以将查询结果集相加" class="header-anchor">#</a> 4. union (可以将查询结果集相加)</h2> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment"># 找出工作岗位是SALESMAN和MANAGER的员工</span>
<span class="token comment"># 第一种：</span>
<span class="token keyword">select</span> ename<span class="token punctuation">,</span>job <span class="token keyword">from</span> emp <span class="token keyword">where</span> job <span class="token operator">=</span> <span class="token string">'MANAGER'</span> <span class="token operator">or</span> job <span class="token operator">=</span> <span class="token string">'SALESMAN'</span><span class="token punctuation">;</span>
<span class="token comment"># 第二种：</span>
<span class="token keyword">select</span> ename<span class="token punctuation">,</span>job <span class="token keyword">from</span> emp <span class="token keyword">where</span> job <span class="token operator">in</span><span class="token punctuation">(</span><span class="token string">'MANAGER'</span><span class="token punctuation">,</span><span class="token string">'SALESMAN'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment"># 第三种：</span>
<span class="token keyword">select</span> ename<span class="token punctuation">,</span>job <span class="token keyword">from</span> emp <span class="token keyword">where</span> job <span class="token operator">=</span> <span class="token string">'MANAGER'</span> <span class="token keyword">union</span> <span class="token keyword">select</span> ename<span class="token punctuation">,</span>job <span class="token keyword">from</span> emp <span class="token keyword">where</span> job <span class="token operator">=</span> <span class="token string">'SALESMAN'</span><span class="token punctuation">;</span>

<span class="token comment"># union可以将两张不相干的表中的数据拼接在一起显示</span>
<span class="token keyword">select</span> ename <span class="token keyword">from</span> emp <span class="token keyword">union</span> <span class="token keyword">select</span> dname <span class="token keyword">from</span> dept<span class="token punctuation">;</span>

<span class="token keyword">select</span> ename<span class="token punctuation">,</span>sal <span class="token keyword">from</span> emp <span class="token keyword">union</span> <span class="token keyword">select</span> dname <span class="token keyword">from</span> dept<span class="token punctuation">;</span> <span class="token comment"># 错误的写法</span>
<span class="token comment"># ERROR 1222 (21000): The used SELECT statements have a different number of columns</span>
</code></pre></div><hr> <h2 id="_5-limit"><a href="#_5-limit" class="header-anchor">#</a> 5. limit</h2> <ul><li>limit是mysql特有的，其他数据库中没有，不通用。（Oracle中有一个相同的机制，叫做rownum）</li> <li>语法机制：<code>limit startIndex, length</code>   startIndex表示起始位置，从0开始，0表示第一条数据。length表示取几个</li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment"># 取出工资前5名的员工</span>
<span class="token keyword">select</span> ename<span class="token punctuation">,</span>sal <span class="token keyword">from</span> emp <span class="token keyword">order</span> <span class="token keyword">by</span> sal <span class="token keyword">desc</span> <span class="token keyword">limit</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> ename<span class="token punctuation">,</span>sal <span class="token keyword">from</span> emp <span class="token keyword">order</span> <span class="token keyword">by</span> sal <span class="token keyword">desc</span> <span class="token keyword">limit</span> <span class="token number">5</span><span class="token punctuation">;</span>

<span class="token comment"># 找出工资排名在第4到第9名的员工:  </span>
<span class="token keyword">select</span> ename<span class="token punctuation">,</span>sal <span class="token keyword">from</span> emp <span class="token keyword">order</span> <span class="token keyword">by</span> sal <span class="token keyword">desc</span> <span class="token keyword">limit</span> <span class="token number">3</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>limit是sql语句最后执行的一个环节：</li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span>        <span class="token number">5</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">from</span>          <span class="token number">1</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>        
<span class="token keyword">where</span>         <span class="token number">2</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>    
<span class="token keyword">group</span> <span class="token keyword">by</span>      <span class="token number">3</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">having</span>        <span class="token number">4</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">order</span> <span class="token keyword">by</span>      <span class="token number">6</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">limit</span>         <span class="token number">7</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>通用的标准分页sql：
<ul><li>每页显示pageSize条记录，第pageNo页：<code>(pageNo - 1) * pageSize, pageSize</code></li></ul></li></ul> <hr> <h2 id="参考"><a href="#参考" class="header-anchor">#</a> 参考</h2> <ul><li><a href="https://www.bilibili.com/video/av57575364" target="_blank" rel="noopener noreferrer">MySQL基础入门-mysql教程-数据库实战<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/funkyblog/server/mysql/2-mysql-base/" class="prev">
        【2. MySQL基础】
      </a></span> <span class="next"><a href="/funkyblog/server/mysql/4-mysql-constraint/">
        【4. CURD，约束，存储引擎】
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/funkyblog/assets/js/app.a24b3efd.js" defer></script><script src="/funkyblog/assets/js/2.3aea1f50.js" defer></script><script src="/funkyblog/assets/js/84.c4c06788.js" defer></script>
  </body>
</html>
